<html>
  <head>
    <title>Bots</title>
<%- include("./blocks/header.ejs") %>
  </head>
  <body>
    <%- include("./blocks/navbar.ejs") %>

    <div class="container">
    
      
        <div class="jumbotron text-center" style="background-color: #5f889e; border-color: #5f889e; color: #D9E4EC;">
          <center>
            <h2>Expressbots</h2>
            <p>Expressbots the best botlist</p>
           <%- include("./blocks/search.ejs") %>
            </center>
        </div>
    
        <h1>
          Top voted bots
        </h1>
      <% let allbots = bots %>
 <% let voted = allbots.sort((a,b) => b.votes - a.votes) %>
        <% for(let i = 0; i < voted.length; i++){ %>
      <div class="card  text-center">
   <a class="badge right" href="/bots/<%= voted[i].bot %>" ><i class="fas fa-eye"></i></a>
       
        <% if(user && voted[i].owners.map(o => o.toString()).includes(user.id)){  %>
    <a info="Edit guild"  class="badge right-down"><i class="fas fa-pencil-alt"></i></a>
       
        <% } %>
  <img src="https://cdn.discordapp.com/avatars/<%= voted[i].bot %>/<%= voted[i].avatar %>.png?size=1024" class="guildimg">
  <h1 class="name"><%= voted[i].name %></h1>
  <span class="votes badge badge-secondary"><i class="fas fa-chevron-circle-up"></i> <%= voted[i].votes %></span>
  <p class="desc"><%= voted[i].shortDesc %></p>
   <p class="tags text-muted"><%= voted[i].tags.slice(0,4).map(t => t).join(", ") %></p>
</div>
      <% } %>
      <hr>
       <h1>
          Recently added bots
        </h1>
        <% let recentlyadded = allbots.sort((a,b) => b.approvedOn - a.approvedOn) %>
       <% for(let i = 0; i < recentlyadded.length; i++){ %>
      <div class="card  text-center">
   <a class="badge right" href="/bots/<%= recentlyadded[i].bot %>" ><i class="fas fa-eye"></i></a>
       
        <% if(user && recentlyadded[i].owners.map(o => o.toString()).includes(user.id)){  %>
    <a info="Edit guild"  class="badge right-down"><i class="fas fa-pencil-alt"></i></a>
       
        <% } %>
  <img src="https://cdn.discordapp.com/avatars/<%= recentlyadded[i].bot %>/<%= recentlyadded[i].avatar %>.png?size=1024" class="guildimg">
  <h1 class="name"><%= recentlyadded[i].name %></h1>
  <span class="votes badge badge-secondary"><i class="fas fa-chevron-circle-up"></i> <%= recentlyadded[i].votes %></span>
  <p class="desc"><%= recentlyadded[i].shortDesc %></p>
   <p class="tags text-muted"><%= recentlyadded[i].tags.slice(0,4).map(t => t).join(", ") %></p>
</div>
      <% } %>
    <hr>
      <% for(let i = 0; i < bots.length; i++){ %>
      <div class="card  text-center">
   <a class="badge right" href="/bots/<%= bots[i].bot %>" ><i class="fas fa-eye"></i></a>
       
        <% if(user && bots[i].owners.map(o => o.toString()).includes(user.id)){  %>
    <a info="Edit guild"  class="badge right-down"><i class="fas fa-pencil-alt"></i></a>
       
        <% } %>
  <img src="https://cdn.discordapp.com/avatars/<%= bots[i].bot %>/<%= bots[i].avatar %>.png?size=1024" class="guildimg">
  <h1 class="name"><%= bots[i].name %></h1>
  <span class="votes badge badge-secondary"><i class="fas fa-chevron-circle-up"></i> <%= bots[i].votes %></span>
  <p class="desc"><%= bots[i].shortDesc %></p>
   <p class="tags text-muted"><%= bots[i].tags.slice(0,4).map(t => t).join(", ") %></p>
</div>
      <% } %>
    </div>
  </body>
  <script>
  function get(name, url) {
	if (!url) url = window.location.href;
		name = name.replace(/[\[\]]/g, '\\$&');
	var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
		results = regex.exec(url);
	if (!results) return null;
	if (!results[2]) return '';
	return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

$(document).ready(function() {

  if(get("type") === "success") {
    $('#success').show();
  }else{
    $('#success').hide();
  }
 
});
  </script>
  <style>
    .blur {
      filter: blur(8px);
      -webkit-filter: blur(8px);
      transition: 0.5s;
    }

    .blur:hover {
      filter: blur(0px);
      -webkit-filter: blur(0px);
    }



body{
 font-family: 'Grandstander', cursive;
}
.card{
 padding: 12px;
      margin: 15px;
      background-color:  rgba(0,204,204,0.3) !important;
      border-radius: 25px;
      width: 350px;
      display: inline-block;
      height: 315px;
      word-break: break-all;
      transition: all 0.2s;
      top:0;
}
.card:hover{
  top: -7px;
}
.right{
  float: right;
}
.right-down{
  position: absolute;
  left: 90.5%;
  top: 10%;
}
.right-down-more{
  position: absolute;
  left: 90.5%;
  top: 17%;
}
.guildimg{
  width: 100px;
 border-radius: 25px 0px 10px 0px;
  position: absolute; 
  top: -1px;
  left: -1px;
  margin: 0px;
  padding: 0px;
}

.name{
  text-align: center;
  position: absolute;
  left: 30%;
  font-size: 20px;
}
.tags{
  position: absolute !important;
  top: 90% !important;
  left: 3% !important;
  color: #6c757d;
}
.text-muted{
  position: absolute;
  left: 30%;
  top: 15%;
  font-size: 13px;
  color: #679FC2 !important;
}

  .fas{
      color: #D9E4EC;
    }
.votes{
  position: absolute;
  top: 35%;
  left: 2%;
   opacity: 0.75;
}
.users{
  position: absolute;
  top: 35%;
  left: 15%;
   opacity: 0.75;
}
    a:hover{
cursor: pointer;
    }
.bots{
  position: absolute;
  top: 43%;
  left: 2%;
   opacity: 0.75;
}
.boosters{
  position: absolute;
  top: 43%;
  left: 15%;
   opacity: 0.75;
}
.desc{
  position: absolute;
  left: 30%;
  top: 40%;
  color: #D9E4EC;
}
    .vas {
      margin-top: 10px;
      margin-bottom: 20px;
    }
</style>
  <script>
$(document).ready(function(){
  $('[data-toggle="tooltip"]').tooltip();
});
</script>
</html>
